!function(t){var i={};function e(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)e.d(s,o,function(i){return t[i]}.bind(null,o));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);const s={PIPE_SPEED:2,PIPE_GAP:150,PIPE_SPACE:220,PIPE_WIDTH:50,EDGE_BUFFER:50,WARM_UP_SECONDS:1};class o{constructor(t){this.dimensions=t;const i=this.dimensions.width+60*s.WARM_UP_SECONDS*s.PIPE_SPEED;this.pipes=[this.makePipe(i),this.makePipe(i+s.PIPE_SPACE),this.makePipe(i+2*s.PIPE_SPACE)]}makePipe(t){const i=this.dimensions.height-2*s.EDGE_BUFFER-s.PIPE_GAP,e=Math.random()*i+s.EDGE_BUFFER;return{topPipe:{left:t,right:t+s.PIPE_WIDTH,top:0,bottom:e},bottomPipe:{left:t,right:t+s.PIPE_WIDTH,top:e+s.PIPE_GAP,bottom:this.dimensions.height},passed:!1}}animate(t){this.drawBackground(t),this.movePipes(),this.drawPipes(t)}drawBackground(t){t.fillStyle="skyblue",t.fillRect(0,0,this.dimensions.width,this.dimensions.height)}movePipes(){if(this.pipes.forEach(t=>{t.topPipe.left-=s.PIPE_SPEED,t.topPipe.right-=s.PIPE_SPEED,t.bottomPipe.left-=s.PIPE_SPEED,t.bottomPipe.right-=s.PIPE_SPEED}),this.pipes[0].topPipe.right<=0){this.pipes.shift();const t=this.pipes[1].topPipe.left+s.PIPE_SPACE;this.pipes.push(this.makePipe(t))}}drawPipes(t){this.pipes.forEach(i=>{t.fillStyle="green",t.fillRect(i.topPipe.left,i.topPipe.top,s.PIPE_WIDTH,i.topPipe.bottom-i.topPipe.top),t.fillRect(i.bottomPipe.left,i.bottomPipe.top,s.PIPE_WIDTH,i.bottomPipe.bottom-i.bottomPipe.top)})}collidesWith(t){const i=(t,i)=>!(t.left>i.right||t.right<i.left)&&!(t.top>i.bottom||t.bottom<i.top);let e=!1;return this.pipes.forEach(s=>{(i(s.topPipe,t)||i(s.bottomPipe,t))&&(e=!0)}),e}passedPipe(t,i){this.pipes.forEach(e=>{e.topPipe.right<t.left&&(e.passed||(e.passed=!0,i()))})}}const n={GRAVITY:.5,FLAP_SPEED:-8,TERMINAL_VEL:12,BIRD_WIDTH:40,BIRD_HEIGHT:30};class h{constructor(t){this.velocity=0,this.dimensions=t,this.position={x:this.dimensions.width/3,y:this.dimensions.height/2}}drawbird(t){t.fillStyle="red",t.fillRect(this.position.x,this.position.y,n.BIRD_WIDTH,n.BIRD_HEIGHT)}move(){this.position.y+=this.velocity,this.velocity+=n.GRAVITY}flap(){this.velocity=n.FLAP_SPEED}animate(t){this.move(),this.drawbird(t)}getBounds(){return{left:this.position.x,right:this.position.x+n.BIRD_WIDTH,top:this.position.y,bottom:this.position.y+n.BIRD_HEIGHT}}outOfBounds(){const t=this.position.y<0,i=this.position.y+n.BIRD_HEIGHT>this.dimensions.height;return t||i}}new class{constructor(t){this.ctx=t.getContext("2d"),this.dimensions={width:t.width,height:t.height},this.highScore=0,this.score=0,window.addEventListener("keydown",this.click.bind(this))}animate(){this.level.animate(this.ctx),this.bird.animate(this.ctx),this.gameOver()&&(alert("You lost!"),this.restart()),this.level.passedPipe(this.bird.getBounds(),()=>{this.score+=1}),this.drawScore(),this.running&&requestAnimationFrame(this.animate.bind(this))}restart(){this.running=!1,this.level=new o(this.dimensions),this.bird=new h(this.dimensions),this.score>this.highScore&&(this.highScore=this.score),this.score=0,this.animate()}play(){this.running=!0,this.animate()}click(t){this.running?32===t.keyCode&&this.bird.flap():this.play()}gameOver(){return this.level.collidesWith(this.bird.getBounds())||this.bird.outOfBounds()}drawScore(){const t={x:this.dimensions.width/3,y:this.dimensions.height/10};this.ctx.font="bold 40pt serif",this.ctx.fillStyle="white",this.ctx.fillText(`CS: ${this.score} HS: ${this.highScore}`,t.x,t.y),this.ctx.strokeStyle="black",this.ctx.lineWidth=2,this.ctx.strokeText(`CS: ${this.score} HS: ${this.highScore}`,t.x,t.y)}}(document.getElementById("bird-game")).restart()}]);